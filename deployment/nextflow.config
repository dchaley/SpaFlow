manifest {
  description = 'POC of a spaFlow pipeline implemented with Nextflow and run on Google Batch' 
  author = 'Lynn Langit'
  nextflowVersion = '>=23.04.0'
}
 
params.outdir = "results"
params.reads = "${projectDir}/data/ggal/ggal_gut_{1,2}.fq"
params.transcriptome = "${projectDir}/data/ggal/ggal_1_48850000_49020000.Ggal71.500bpflank.fa"
params.multiqc = "${projectDir}/multiqc"
 
profiles {
  standard {
    process.container = 'quay.io/nextflow/rnaseq-nf:v1.2'
  }

  docker {
    process.container = 'quay.io/nextflow/rnaseq-nf:v1.2'
    docker.enabled = true
  }

  gcb {
      params.transcriptome = 'gs://rnaseq-nf/data/ggal/transcript.fa'
      params.reads = 'gs://rnaseq-nf/data/ggal/gut_{1,2}.fq'
      params.multiqc = 'gs://rnaseq-nf/multiqc'
      process.executor = 'google-batch'
      process.container = 'us-central1-docker.pkg.dev/genomics-compute/images/rnaseq:1.0'
      process.label = 'spaflowlangit'
      process.maxRetries = 3
      workDir = 'gs://batch-demo-data-compute/nf-rnaseq-spot-results' 
      google.region  = 'us-central1'
      google.project = 'genomics-compute'
      google.batch.spot = true
  }

  'gs-data' {
      process.container = 'quay.io/nextflow/rnaseq-nf:v1.2'
      params.transcriptome = 'gs://rnaseq-nf/data/ggal/transcript.fa'
      params.reads = 'gs://rnaseq-nf/data/ggal/gut_{1,2}.fq'
  }
}